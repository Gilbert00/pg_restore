                           Процедура восстановления копий бэкапрв баз Postgres

Модуль: /root/bin/pg_restore_internal

Параметры позиционные:
Имя_сервера_откуда
Имя_сервера_куда
Имя_медиа-сервера
Имя_восстанавливаемого_бэкапа (берется из консоли NetBackup - Backup, Archive and Restore / Restore Files - Copy+Paste)
Имя_каталога_восстановления, не совпадающего с исходным каталогом /pg_backup (параметр опциональный). Уточнение: концевые слэши (/) в имени каталога не указываются.

Действия:
Проверка правильности введенных имен серверов
Поиск последнего по времени бэкапа (опционально)
Проверка правильности имени бэкапа
Формирование входного файла для bprestore в каталоге запуска. Имя файла: pg_restore_$$.in, где $$ - номер запущенного процесса программы.
Формирование файла переименования каталогов (опционально). Имя файла: pg_rnm_$$.in, где $$ - номер запущенного процесса программы. Файл создается в каталоге /usr/openv/netbackup/logs/user_ops/ .
Формируется команда bprestore с параметрами, печатается и запускается.
Лог запуска пишется в /root/pg_rest/pg_restore_$$.log, где $$ - номер запущенного процесса программы.

Если Имя_восстанавливаемого_бэкапа совпадает с last, то процедура ищет самый последний по времени бэкап и использует его.
В этом случае Имя_сервера_откуда может быть списком в кавычках нод кластера. 
Например, "p0mole-pg5001lv.region.vtb.ru p0mole-pg2001lv.region.vtb.ru" .

Программа выдает в лог запуска имя сбрасываемого каталога бэкапа и его объем в KB.

Каждый оператор может в своем личном каталоге создать скрипты вызова пр-мы pg_restore_internal так, как ему удобно и нравится.